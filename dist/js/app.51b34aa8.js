(function(e){function t(t){for(var r,i,o=t[0],l=t[1],u=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0999":function(e,t,a){"use strict";a("6ba6")},"150b":function(e,t,a){},"1e59":function(e,t,a){"use strict";a("cdc4")},"39ab":function(e,t,a){"use strict";a("57e6")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("4de4"),a("4d90"),a("99af");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],i={name:"app"},o=i,l=a("2877"),u=Object(l["a"])(o,n,s,!1,null,null,null),c=u.exports,d=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"loginbox"},[e._m(0),a("el-form",{ref:"loginFormRef",staticClass:"form",attrs:{model:e.loginForm,rules:e.loginFormRules}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名","prefix-icon":"iconfont icon-user"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"密码","prefix-icon":"iconfont icon-3702mima"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),a("el-button",{attrs:{type:"info"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)])},p=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"imgbox"},[r("img",{attrs:{src:a("cf05"),alt:""}})])}],f=a("1da1"),g=(a("96cf"),{data:function(){return{loginForm:{username:"admin",password:"123456"},loginFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]}}},methods:{reset:function(){this.$refs.loginFormRef.resetFields()},login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("login",e.loginForm);case 4:if(r=t.sent,n=r.data,200==n.meta.status){t.next=9;break}return e.$message.error("用户名或密码错误"),t.abrupt("return");case 9:e.$message.success("登陆成功"),window.sessionStorage.setItem("token",n.data.token),e.$router.push("/home");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),b=g,h=(a("70f4"),Object(l["a"])(b,m,p,!1,null,"1bf71524",null)),v=h.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"contain"},[a("el-header",[a("div",[a("span",[e._v("电商后台管理项目")])]),a("el-button",{attrs:{type:"info"},on:{click:e.back}},[e._v("退出")])],1),a("el-container",[a("el-aside",{attrs:{width:e.flag?"64px":"200px"}},[a("div",{staticClass:"collapsebtn",on:{click:e.isflag}},[e._v("|||")]),a("el-menu",{attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.flag,"collapse-transition":!1,router:"","default-active":e.activepath}},e._l(e.menuList,(function(t){return a("el-submenu",{key:t.id,attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{class:e.iconobj[t.id]}),a("span",[e._v(e._s(t.authName))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/"+t.path},on:{click:function(a){return e.saveNavState("/"+t.path)}}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.authName))])])}))],2)})),1)],1),a("el-main",[a("router-view")],1)],1)],1)},w=[],x={data:function(){return{menuList:[],iconobj:{125:"iconfont icon-users",103:"iconfont icon-tijikongjian",101:"iconfont icon-shangpin",102:"iconfont icon-danju",145:"iconfont icon-baobiao"},flag:!1,activepath:""}},created:function(){this.getlist(),this.activepath=window.sessionStorage.getItem("activepath")},methods:{back:function(){window.sessionStorage.clear(),this.$router.push("/login")},getlist:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("menus");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.menuList=r.data;case 7:case"end":return t.stop()}}),t)})))()},isflag:function(){this.flag=!this.flag},saveNavState:function(e){window.sessionStorage.setItem("activepath",e),this.activepath=e}}},k=x,y=(a("1e59"),Object(l["a"])(k,_,w,!1,null,"9b766f9c",null)),$=y.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("w")])},C=[],R={data:function(){return{}}},j=R,V=Object(l["a"])(j,F,C,!1,null,"13f78700",null),O=V.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:15}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getuserlist},model:{value:e.pramas.query,callback:function(t){e.$set(e.pramas,"query",t)},expression:"pramas.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getuserlist},slot:"append"})],1)],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加用户")])],1)])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"47px"},attrs:{data:e.userList,border:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"username",label:"姓名"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),a("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),a("el-table-column",{attrs:{prop:"mg_state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.userStateChanged(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editdialog(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deletecount(t.row.id)}}}),a("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(a){return e.addrole(t.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pramas.pagenum,"page-sizes":[2,4,5],"page-size":e.pramas.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.DialogClosed}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.addForm,rules:e.formrules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.validate}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改用户",visible:e.editdialogVisible,width:"50%"},on:{"update:visible":function(t){e.editdialogVisible=t}}},[a("el-form",{ref:"editruleForm",staticClass:"demo-ruleForm",attrs:{model:e.editform,rules:e.formrules,"label-width":"100px"},on:{close:e.editDialogClosed}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editform.username,callback:function(t){e.$set(e.editform,"username",t)},expression:"editform.username"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editform.email,callback:function(t){e.$set(e.editform,"email",t)},expression:"editform.email"}})],1),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.editform.mobile,callback:function(t){e.$set(e.editform,"mobile",t)},expression:"editform.mobile"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editvalidate}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"分配角色",visible:e.adddialogFormVisible},on:{"update:visible":function(t){e.adddialogFormVisible=t},close:e.setRoleDialogClosed}},[a("el-form",[a("el-form-item",{attrs:{label:"当前用户"}},[e._v(e._s(e.roles.name))]),a("el-form-item",{attrs:{label:"当前角色"}},[e._v(e._s(e.roles.role))]),a("el-form-item",{attrs:{label:"分配新角色"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectvalue,callback:function(t){e.selectvalue=t},expression:"selectvalue"}},e._l(e.rolelist,(function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.adddialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.okrole}},[e._v("确 定")])],1)],1)],1)},z=[],T=(a("b0c0"),{data:function(){var e=function(e,t,a){var r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(r.test(t))return a();a(new Error("请输入合法邮箱"))},t=function(e,t,a){var r=/^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(r.test(t))return a();a(new Error("请输入合法手机号"))};return{pramas:{query:"",pagenum:1,pagesize:2},userList:[],total:0,dialogVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},formrules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话号",trigger:"blur"},{validator:t,trigger:"blur"}]},editdialogVisible:!1,editform:{username:"",email:"",mobile:"",id:""},adddialogFormVisible:!1,roles:{name:"",role:"",id:""},rolelist:[],selectvalue:""}},created:function(){this.getuserlist()},methods:{getuserlist:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users",{params:e.pramas});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.console.error("获取用户信息失败"));case 6:e.userList=r.data.users,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.pramas.pagesize=e,this.getuserlist()},handleCurrentChange:function(e){this.pramas.pagenum=e,this.getuserlist()},userStateChanged:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.put("users/".concat(e.id,"/state/").concat(e.mg_state));case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return e.mg_state=!e.mg_state,a.abrupt("return",t.$message.error("更新用户状态失败"));case 7:t.$message.success("更新用户状态成功");case 8:case"end":return a.stop()}}),a)})))()},DialogClosed:function(){this.$refs.ruleForm.resetFields()},validate:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users",e.addForm);case 4:if(r=t.sent,n=r.data,201===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success("添加成功"),e.dialogVisible=!1,e.getuserlist();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editdialog:function(e){this.editdialogVisible=!0,this.editform.username=e.username,this.editform.email=e.email,this.editform.mobile=e.mobile,this.editform.id=e.id},editDialogClosed:function(){this.$refs.editruleForm.resetFields()},editvalidate:function(){var e=this;this.$refs.editruleForm.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("users/"+e.editform.id,{email:e.editform.email,mobile:e.editform.mobile});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success("修改成功"),e.editdialogVisible=!1,e.getuserlist();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deletecount:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"!=r){a.next=14;break}return a.next=6,t.$http.delete("users/"+e);case 6:if(n=a.sent,s=n.data,200!=s.meta.status){a.next=13;break}return t.$message.success("删除成功"),console.log(t.pramas.pagenum),t.getuserlist(),a.abrupt("return");case 13:t.$message.error("删除失败");case 14:if("cancel"!=r){a.next=16;break}return a.abrupt("return",t.$message("已取消删除"));case 16:case"end":return a.stop()}}),a)})))()},addrole:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.roles.name=e.username,t.roles.role=e.role_name,t.roles.id=e.id,a.next=5,t.$http.get("roles");case 5:if(r=a.sent,n=r.data,200===n.meta.status){a.next=9;break}return a.abrupt("return",t.$message.error("分配失败"));case 9:t.rolelist=n.data,t.adddialogFormVisible=!0;case 11:case"end":return a.stop()}}),a)})))()},okrole:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectvalue){t.next=2;break}return t.abrupt("return",e.$message.error("请选择角色"));case 2:return t.next=4,e.$http.put("users/".concat(e.roles.id,"/role"),{rid:e.selectvalue});case 4:if(a=t.sent,r=a.data,200===r.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("分配失败"));case 8:e.$message.success("更新成功"),e.getuserlist(),e.adddialogFormVisible=!1;case 11:case"end":return t.stop()}}),t)})))()},setRoleDialogClosed:function(){this.selectvalue=""}}}),D=T,I=Object(l["a"])(D,S,z,!1,null,"4540d8a1",null),q=I.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("角色列表")])],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:15}},[a("el-button",{attrs:{type:"primary",round:""}},[e._v("添加角色")])],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.roleslist,border:""}},[a("el-table-column",{attrs:{type:"expand",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(r,n){return a("el-row",{key:r.id,class:["rowbottom","vcenter",0===n?"rowtop":""]},[a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{closable:""},on:{close:function(a){return e.removetag(t.row,r.id)}}},[e._v(e._s(r.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:19}},e._l(r.children,(function(r,n){return a("el-row",{key:r.id,class:["vcenter",0===n?"":"rowtop"]},[a("el-col",{attrs:{span:6}},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.removetag(t.row,r.id)}}},[e._v(e._s(r.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:18}},e._l(r.children,(function(r,n){return a("el-tag",{key:r.id,class:[0===n?"":"rowtop"],attrs:{type:"warning",closable:""},on:{close:function(a){return e.removetag(t.row,r.id)}}},[e._v(e._s(r.authName))])})),1)],1)})),1)],1)}))}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),a("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),a("el-table-column",{attrs:{prop:"level",label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(a){return e.rightdialogVisible(t.row)}}},[e._v("分配权限")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"分配权限",visible:e.setrightdialogVisible,width:"50%"},on:{"update:visible":function(t){e.setrightdialogVisible=t}}},[a("el-tree",{ref:"treeRef",attrs:{data:e.rightlists,props:e.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.defaultkeys}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.setrightdialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addroles}},[e._v("确 定")])],1)],1)],1)},P=[],E=a("2909"),N=(a("159b"),a("a15b"),{data:function(){return{roleslist:[],setrightdialogVisible:!1,rightlists:[],treeProps:{children:"children",label:"authName"},defaultkeys:[],roleId:""}},created:function(){this.getroles()},methods:{getroles:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:if(a=t.sent,r=a.data,200==r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取失败"));case 6:e.roleslist=r.data;case 7:case"end":return t.stop()}}),t)})))()},removetag:function(e,t){var a=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=r.sent,"confirm"!=n){r.next=13;break}return r.next=6,a.$http.delete("roles/".concat(e.id,"/rights/").concat(t));case 6:if(s=r.sent,i=s.data,200!=i.meta.status){r.next=12;break}return a.$message.success("删除成功"),e.children=i.data,r.abrupt("return");case 12:a.$message.error("删除失败");case 13:if("cancel"!=n){r.next=15;break}return r.abrupt("return",a.$message("已取消删除"));case 15:case"end":return r.stop()}}),r)})))()},rightdialogVisible:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.roleId=e.id,t.defaultkeys=[],a.next=4,t.$http.get("rights/tree");case 4:if(r=a.sent,n=r.data,200==n.meta.status){a.next=8;break}return a.abrupt("return",t.$message.error("获取失败"));case 8:t.rightlists=n.data,t.getDefaultKeys(e,t.defaultkeys),t.setrightdialogVisible=!0;case 11:case"end":return a.stop()}}),a)})))()},getDefaultKeys:function(e,t){var a=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){a.getDefaultKeys(e,t)}))},addroles:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[].concat(Object(E["a"])(e.$refs.treeRef.getCheckedKeys()),Object(E["a"])(e.$refs.treeRef.getHalfCheckedKeys())),r=a.join(","),t.next=4,e.$http.post("roles/".concat(e.roleId,"/rights"),{rids:r});case 4:if(n=t.sent,s=n.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("分配失败"));case 8:e.getroles(),e.$message.success("分配成功"),e.setrightdialogVisible=!1;case 11:case"end":return t.stop()}}),t)})))()}}}),B=N,A=(a("7dc0"),Object(l["a"])(B,L,P,!1,null,"6f3dfb0c",null)),M=A.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("权限列表")])],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightslist,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"80"}}),a("el-table-column",{attrs:{prop:"authName",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"path",label:"路径"}}),a("el-table-column",{attrs:{prop:"level",label:"权限等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.level?a("el-tag",[e._v("一级")]):e._e(),1==t.row.level?a("el-tag",{attrs:{type:"success"}},[e._v("二级")]):e._e(),2==t.row.level?a("el-tag",{attrs:{type:"warning"}},[e._v("三级")]):e._e()]}}])})],1)],1)],1)},U=[],Z={data:function(){return{rightslist:[]}},created:function(){this.getRightslist()},methods:{getRightslist:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rights/list");case 2:if(a=t.sent,r=a.data,200==r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取信息失败"));case 6:e.rightslist=r.data;case 7:case"end":return t.stop()}}),t)})))()}}},H=Z,J=Object(l["a"])(H,K,U,!1,null,"5dc13b74",null),Y=J.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品分类")])],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.showDialog}},[e._v("添加分类")])],1)],1),a("tree-table",{staticClass:"treetable",attrs:{data:e.goodslist,columns:e.columns,"show-index":"","index-text":"#","selection-type":!1,"expand-type":!1},scopedSlots:e._u([{key:"isok",fn:function(e){return[e.row.cat_deleted?a("i",{staticClass:"el-icon-error",staticStyle:{color:"lightred"}}):a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}})]}},{key:"order",fn:function(t){return[0===t.row.cat_level?a("el-tag",{attrs:{size:"mini"}},[e._v("一级")]):e._e(),1===t.row.cat_level?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("二级")]):e._e(),2===t.row.cat_level?a("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("三级")]):e._e()]}}])},[a("template",{slot:"opt"},[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"}},[e._v("删除")])],1)],2),a("el-pagination",{attrs:{"current-page":e.queryinfo.pagenum,"page-size":e.queryinfo.pagesize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加分类",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"addCateFormRef",attrs:{rules:e.addCateFormRules,model:e.cateform,width:"50%"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.cateform.cat_name,callback:function(t){e.$set(e.cateform,"cat_name",t)},expression:"cateform.cat_name"}})],1),a("el-form-item",{attrs:{label:"分类名称"}},[a("el-cascader",{attrs:{clearable:"",options:e.parentCateList,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:e.handleChange},model:{value:e.parentvalue,callback:function(t){e.parentvalue=t},expression:"parentvalue"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addform}},[e._v("确 定")])],1)],1)],1)},Q=[],W={data:function(){return{goodslist:[],queryinfo:{type:3,pagenum:1,pagesize:5},total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"order"},{label:"操作",type:"template",template:"opt"}],dialogFormVisible:!1,cateform:{cat_name:"",cat_pid:0,cat_level:0},addCateFormRules:{cat_name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:4,message:"长度在 2 到 4 个字符",trigger:"blur"}]},parentCateList:[],parentvalue:[]}},created:function(){this.getgoods()},methods:{getgoods:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:e.queryinfo});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取失败"));case 6:e.goodslist=r.data.result,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryinfo.pagesize=e,this.getgoods()},handleCurrentChange:function(e){this.queryinfo.pagenum=e,this.getgoods()},showDialog:function(){this.getParentCateList(),this.dialogFormVisible=!0},getParentCateList:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:{type:2}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取失败"));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},handleChange:function(){if(console.log(this.parentvalue),this.parentvalue.length>0)return this.cateform.cat_pid=this.parentvalue[this.parentvalue.length-1],void(this.cateform.cat_level=this.parentvalue.length);this.cateform.cat_pid=0,this.cateform.cat_level=0},addform:function(){var e=this;this.$refs.addCateFormRef.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("categories",e.cateform);case 4:if(r=t.sent,n=r.data,201===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("添加失败"));case 8:e.$message.success("添加成功"),e.getgoods(),e.dialogFormVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},X=W,ee=(a("dff0"),Object(l["a"])(X,G,Q,!1,null,"01c26d5f",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("分类参数")])],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("el-alert",{attrs:{"show-icon":"",title:"注意：只能对第三级标签设置相关参数",type:"warning"}}),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",[a("span",{staticStyle:{"margin-right":"20px"}},[e._v("选择商品分类:")]),a("el-cascader",{attrs:{clearable:"",options:e.parentCateList,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:e.handleChange},model:{value:e.parentvalue,callback:function(t){e.parentvalue=t},expression:"parentvalue"}})],1)],1),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isabled},on:{click:e.mkdVisible}},[e._v("添加参数")]),a("el-table",{staticStyle:{width:"100%","margin-top":"47px"},attrs:{data:e.manyTableData,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return e.tagclose(t.row,n)}}},[e._v(e._s(r))])})),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.handleInputConfirm(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row)}},model:{value:t.row.inputValue,callback:function(a){e.$set(t.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t.row)}}},[e._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"参数"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editdialog(t.row.attr_id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deletecount(t.row.attr_id)}}},[e._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isabled},on:{click:e.mkdVisible}},[e._v("添加属性")]),a("el-table",{staticStyle:{width:"100%","margin-top":"47px"},attrs:{data:e.onlyTableData,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return e.tagclose(t.row,n)}}},[e._v(e._s(r))])})),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.handleInputConfirm(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row)}},model:{value:t.row.inputValue,callback:function(a){e.$set(t.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t.row)}}},[e._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"属性"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editdialog(t.row.attr_id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deletecount(t.row.attr_id)}}},[e._v("删除")])]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:"添加"+e.dialogTexy,visible:e.dVisible,width:"30%"},on:{"update:visible":function(t){e.dVisible=t},close:e.closep}},[a("el-form",{ref:"pruleForm",staticClass:"demo-ruleForm",attrs:{model:e.addpruleForm,rules:e.addprules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.dialogTexy,prop:"pname"}},[a("el-input",{model:{value:e.addpruleForm.pname,callback:function(t){e.$set(e.addpruleForm,"pname",t)},expression:"addpruleForm.pname"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改"+e.dialogTexy,visible:e.editdVisible,width:"30%"},on:{"update:visible":function(t){e.editdVisible=t},close:e.editclosep}},[a("el-form",{ref:"editpruleForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.addprules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.dialogTexy,prop:"attr_name"}},[a("el-input",{model:{value:e.editForm.attr_name,callback:function(t){e.$set(e.editForm,"attr_name",t)},expression:"editForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("确 定")])],1)],1)],1)],1)},re=[],ne=(a("ac1f"),a("1276"),a("498a"),a("a434"),{data:function(){return{parentvalue:[],parentCateList:[],activeName:"many",manyTableData:[],onlyTableData:[],dialogTexy:"",dVisible:!1,addpruleForm:{pname:"",attr_name:""},addprules:{pname:[{required:!0,message:"错误",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],attr_name:[{required:!0,message:"错误",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}]},editdVisible:!1,editForm:[]}},computed:{isabled:function(){return 3!==this.parentvalue.length},cateId:function(){return 3==this.parentvalue.length?this.parentvalue[2]:null}},created:function(){this.getParentCateList()},methods:{getParentCateList:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:{type:3}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取失败"));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},handleChange:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getParamsData();case 1:case"end":return t.stop()}}),t)})))()},getParamsData:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(3==e.parentvalue.length){t.next=5;break}return e.parentvalue=[],e.manyTableData=[],e.onlyTableData=[],t.abrupt("return",e.$message.error("请选中三级标签"));case 5:return t.next=7,e.$http.get("categories/".concat(e.cateId,"/attributes"),{params:{sel:e.activeName}});case 7:if(a=t.sent,r=a.data,200===r.meta.status){t.next=11;break}return t.abrupt("return");case 11:r.data.forEach((function(e){e.attr_vals=e.attr_vals?e.attr_vals.split(" "):[],e.inputVisible=!1,e.inputValue=""})),console.log(r.data),"many"==e.activeName?(e.manyTableData=r.data,e.dialogTexy="动态参数"):(e.onlyTableData=r.data,e.dialogTexy="静态属性");case 14:case"end":return t.stop()}}),t)})))()},handleClick:function(){this.getParamsData()},mkdVisible:function(){this.dVisible=!0},closep:function(){this.$refs.pruleForm.resetFields()},editclosep:function(){this.$refs.editpruleForm.resetFields()},add:function(){var e=this;this.$refs.pruleForm.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("categories/".concat(e.cateId,"/attributes"),{attr_name:e.addpruleForm.pname,attr_sel:e.activeName});case 4:if(r=t.sent,n=r.data,201===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("添加参数失败"));case 8:e.$message.success("添加参数成功"),e.getParamsData(),e.dVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},edit:function(){var e=this;this.$refs.editpruleForm.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("categories/".concat(e.cateId,"/attributes/").concat(e.editForm.attr_id),{attr_name:e.editForm.attr_name,attr_sel:e.activeName});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改参数失败"));case 8:e.$message.success("修改参数成功"),e.getParamsData(),e.editdVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editdialog:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("categories/".concat(t.cateId,"/attributes/").concat(e,"}"),{params:{attr_vals:t.activeName}});case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error("请求参数失败"));case 6:t.editForm=n.data,t.editdVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},deletecount:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"!=r){a.next=13;break}return a.next=6,t.$http.delete("categories/".concat(t.cateId,"/attributes/").concat(e));case 6:if(n=a.sent,s=n.data,200!=s.meta.status){a.next=12;break}return t.$message.success("删除成功"),t.getParamsData(),a.abrupt("return");case 12:t.$message.error("删除失败");case 13:if("cancel"!=r){a.next=15;break}return a.abrupt("return",t.$message("已取消删除"));case 15:case"end":return a.stop()}}),a)})))()},handleInputConfirm:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!=e.inputValue.trim().length){a.next=4;break}return e.inputValue="",e.inputVisible=!1,a.abrupt("return");case 4:e.attr_vals.push(e.inputValue.trim()),e.inputValue="",e.inputVisible=!1,t.setedittag(e);case 8:case"end":return a.stop()}}),a)})))()},setedittag:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.put("categories/".concat(t.cateId,"/attributes/").concat(e.attr_id),{attr_name:e.attr_name,attr_sel:e.attr_sel,attr_vals:e.attr_vals.join(" ")});case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error("修改参数失败"));case 6:t.$message.success("修改参数成功");case 7:case"end":return a.stop()}}),a)})))()},showInput:function(e){var t=this;e.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},tagclose:function(e,t){e.attr_vals.splice(t,1),this.setedittag(e)}}}),se=ne,ie=(a("39ab"),Object(l["a"])(se,ae,re,!1,null,"5d7a1a25",null)),oe=ie.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品列表")])],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:15}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getgoodslist},model:{value:e.pramas.query,callback:function(t){e.$set(e.pramas,"query",t)},expression:"pramas.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getgoodslist},slot:"append"})],1)],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.addgoods}},[e._v("添加商品")])],1)])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"47px"},attrs:{data:e.goodsList,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",width:"80px"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"70px"}}),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间",width:"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.row.add_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editdialog(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deletecount(t.row.goods_id)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pramas.pagenum,"page-sizes":[20,10,5,2],"page-size":e.pramas.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ue=[],ce={data:function(){return{goodsList:[],pramas:{query:"",pagenum:1,pagesize:10},total:0}},created:function(){this.getgoodslist()},methods:{getgoodslist:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("goods",{params:e.pramas});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品列表失败！"));case 6:e.$message.success("获取商品成功"),console.log(r.data),e.goodsList=r.data.goods,console.log(e.goodsList),e.total=r.data.total;case 11:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.pramas.pagesize=e,this.getgoodslist()},handleCurrentChange:function(e){this.pramas.pagenum=e,this.getgoodslist()},deletecount:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"!=r){a.next=13;break}return a.next=6,t.$http.delete("goods/".concat(e));case 6:if(n=a.sent,s=n.data,200!=s.meta.status){a.next=12;break}return t.$message.success("删除成功"),t.getgoodslist(),a.abrupt("return");case 12:t.$message.error("删除失败");case 13:if("cancel"!=r){a.next=15;break}return a.abrupt("return",t.$message("已取消删除"));case 15:case"end":return a.stop()}}),a)})))()},addgoods:function(){this.$router.push("goods/add")}}},de=ce,me=Object(l["a"])(de,le,ue,!1,null,"4729efe8",null),pe=me.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("添加商品")])],1),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":""}}),a("el-steps",{attrs:{space:200,active:e.activeindex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-position":"top","label-width":"100px"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":e.changetabs},on:{"tab-click":e.tabclicks},model:{value:e.activeindex,callback:function(t){e.activeindex=t},expression:"activeindex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:e.ruleForm.goods_name,callback:function(t){e.$set(e.ruleForm,"goods_name",t)},expression:"ruleForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.goods_price,callback:function(t){e.$set(e.ruleForm,"goods_price",t)},expression:"ruleForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.goods_weight,callback:function(t){e.$set(e.ruleForm,"goods_weight",t)},expression:"ruleForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.goods_number,callback:function(t){e.$set(e.ruleForm,"goods_number",t)},expression:"ruleForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_number"}},[a("el-cascader",{attrs:{clearable:"",options:e.parentCateList,props:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"}},on:{change:e.handleChange},model:{value:e.ruleForm.goods_cat,callback:function(t){e.$set(e.ruleForm,"goods_cat",t)},expression:"ruleForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},[e._l(e.manyTableData,(function(t,r){return a("el-form-item",{key:r,attrs:{label:t.attr_name}},[a("el-checkbox-group",{model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}},e._l(t.attr_vals,(function(e,t){return a("el-checkbox",{key:t,attrs:{label:e,border:""}})})),1)],1)}))],2),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},e._l(e.onlyTableData,(function(t){return a("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[a("el-input",{model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadURL,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"list-type":"picture",headers:e.headerObj,"on-success":e.successload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:e.ruleForm.goods_introduce,callback:function(t){e.$set(e.ruleForm,"goods_introduce",t)},expression:"ruleForm.goods_introduce"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.addAllForm}},[e._v("添加商品")])],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:e.imgdialogVisible,width:"50%"},on:{"update:visible":function(t){e.imgdialogVisible=t}}},[a("img",{staticClass:"imgpreview",attrs:{src:e.previewPath,alt:""}})])],1)],1)},ge=[],be=(a("c740"),a("2ef0")),he=a.n(be),ve={data:function(){return{activeindex:"0",ruleForm:{goods_name:"",goods_price:0,goods_weight:0,goods_number:0,pics:[],goods_introduce:"",goods_cat:[],attrs:[]},rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}]},parentCateList:[],manyTableData:[],onlyTableData:[],uploadURL:"http://127.0.0.1:8888/api/private/v1/upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},previewPath:"",imgdialogVisible:!1}},created:function(){this.getParentCateList()},computed:{cateId:function(){return 3==this.ruleForm.goods_cat.length?this.ruleForm.goods_cat[2]:null}},methods:{getParentCateList:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:{type:3}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取失败"));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},handleChange:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getParamsData();case 1:case"end":return t.stop()}}),t)})))()},getParamsData:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(3==e.ruleForm.goods_cat.length){t.next=3;break}return e.ruleForm.goods_cat=[],t.abrupt("return",e.$message.error("请选中三级标签"));case 3:case"end":return t.stop()}}),t)})))()},changetabs:function(e,t){if("0"===t&&3!=this.ruleForm.goods_cat.length)return this.$message.error("请先选择商品分类"),!1},tabclicks:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("1"!=e.activeindex){t.next=10;break}return t.next=3,e.$http.get("categories/".concat(e.cateId,"/attributes"),{params:{sel:"many"}});case 3:if(a=t.sent,r=a.data,200===r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.error("获取参数失败"));case 7:e.$message.success("获取参数成功"),r.data.forEach((function(e){e.attr_vals=e.attr_vals?e.attr_vals.split(" "):[]})),e.manyTableData=r.data;case 10:if("2"!=e.activeindex){t.next=20;break}return t.next=13,e.$http.get("categories/".concat(e.cateId,"/attributes"),{params:{sel:"only"}});case 13:if(n=t.sent,s=n.data,200===s.meta.status){t.next=17;break}return t.abrupt("return",e.$message.error("获取参数失败"));case 17:e.$message.success("获取参数成功"),e.onlyTableData=s.data,console.log(s.data);case 20:case"end":return t.stop()}}),t)})))()},handlePreview:function(e){this.previewPath=e.response.data.url,this.imgdialogVisible=!0},handleRemove:function(e){var t=e.response.data.tem_path,a=this.ruleForm.pics.findIndex((function(e){return e.pic===t}));this.ruleForm.pics.splice(a,1)},successload:function(e){console.log(e);var t={pic:e.data.tmp_path};this.ruleForm.pics.push(t)},addAllForm:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.ruleForm.validate(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("请填写必填项"));case 2:return e.manyTableData.forEach((function(t){var a={attr_id:t.attr_id,attr_value:t.attr_vals.join(" ")};e.ruleForm.attrs.push(a)})),e.onlyTableData.forEach((function(t){var a={attr_id:t.attr_id,attr_value:t.attr_vals};e.ruleForm.attrs.push(a)})),r=he.a.cloneDeep(e.ruleForm),r.goods_cat=r.goods_cat.join(","),console.log(r),t.next=9,e.$http.post("goods",r);case 9:if(n=t.sent,s=n.data,201===s.meta.status){t.next=13;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 13:e.$router.push("/goods");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},_e=ve,we=(a("0999"),Object(l["a"])(_e,fe,ge,!1,null,"09cce300",null)),xe=we.exports;r["default"].use(d["a"]);var ke=[{path:"/",redirect:"/login"},{path:"/login",component:v},{path:"/home",component:$,redirect:"/welcome",children:[{path:"/welcome",component:O},{path:"/users",component:q},{path:"/roles",component:M},{path:"/rights",component:Y},{path:"/categories",component:te},{path:"/params",component:oe},{path:"/goods",component:pe},{path:"/goods/add",component:xe}]}],ye=new d["a"]({routes:ke});ye.beforeEach((function(e,t,a){if("/login"===e.path)return a();var r=window.sessionStorage.getItem("token");if(!r)return a("/login");a()}));var $e=ye,Fe=a("d67e"),Ce=a.n(Fe),Re=(a("9e1f"),a("450d"),a("6ed5")),je=a.n(Re),Ve=(a("0fb7"),a("f529")),Oe=a.n(Ve),Se=(a("e612"),a("dd87")),ze=a.n(Se),Te=(a("075a"),a("72aa")),De=a.n(Te),Ie=(a("915d"),a("e04d")),qe=a.n(Ie),Le=(a("28b2"),a("c7ad")),Pe=a.n(Le),Ee=(a("6611"),a("e772")),Ne=a.n(Ee),Be=(a("1f1a"),a("4e4b")),Ae=a.n(Be),Me=(a("5e32"),a("6721")),Ke=a.n(Me),Ue=(a("cbb5"),a("8bbc")),Ze=a.n(Ue),He=(a("a7cc"),a("df33")),Je=a.n(He),Ye=(a("672e"),a("101e")),Ge=a.n(Ye),Qe=(a("0c67"),a("299c")),We=a.n(Qe),Xe=(a("e960"),a("b35b")),et=a.n(Xe),tt=(a("5466"),a("ecdf")),at=a.n(tt),rt=(a("38a0"),a("ad41")),nt=a.n(rt),st=(a("f4f9"),a("c2cc")),it=a.n(st),ot=(a("7a0f"),a("0f6c")),lt=a.n(ot),ut=(a("b8e0"),a("a4c4")),ct=a.n(ut),dt=(a("b84d"),a("c216")),mt=a.n(dt),pt=(a("8f24"),a("76b9")),ft=a.n(pt),gt=(a("8bd8"),a("4cb2")),bt=a.n(gt),ht=(a("ce18"),a("f58e")),vt=a.n(ht),_t=(a("4ca3"),a("443e")),wt=a.n(_t),xt=(a("de31"),a("c69e")),kt=a.n(xt),yt=(a("a769"),a("5cc3")),$t=a.n(yt),Ft=(a("adec"),a("3d2d")),Ct=a.n(Ft),Rt=(a("a673"),a("7b31")),jt=a.n(Rt),Vt=(a("10cb"),a("f3ad")),Ot=a.n(Vt),St=(a("eca7"),a("3787")),zt=a.n(St),Tt=(a("425f"),a("4105")),Dt=a.n(Tt),It=(a("1951"),a("eedf")),qt=a.n(It),Lt=(a("f225"),a("89a9")),Pt=a.n(Lt),Et=(a("d4df"),a("7fc1")),Nt=a.n(Et),Bt=(a("560b"),a("dcdc")),At=a.n(Bt),Mt=(a("9c49"),a("6640")),Kt=a.n(Mt),Ut=(a("d2ac"),a("95b0")),Zt=a.n(Ut);r["default"].use(Zt.a),r["default"].use(Kt.a),r["default"].use(At.a),r["default"].use(Nt.a),r["default"].use(Pt.a),r["default"].use(qt.a),r["default"].use(Dt.a),r["default"].use(zt.a),r["default"].use(Ot.a),r["default"].use(jt.a),r["default"].use(Ct.a),r["default"].use($t.a),r["default"].use(kt.a),r["default"].use(wt.a),r["default"].use(vt.a),r["default"].use(bt.a),r["default"].use(ft.a),r["default"].use(mt.a),r["default"].use(ct.a),r["default"].use(lt.a),r["default"].use(it.a),r["default"].use(nt.a),r["default"].use(at.a),r["default"].use(et.a),r["default"].use(We.a),r["default"].use(Ge.a),r["default"].use(Je.a),r["default"].use(Ze.a),r["default"].use(Ke.a),r["default"].use(Ae.a),r["default"].use(Ne.a),r["default"].use(Pe.a),r["default"].use(qe.a),r["default"].use(De.a),r["default"].use(ze.a),r["default"].prototype.$message=Oe.a,r["default"].prototype.$confirm=je.a.confirm;a("150b"),a("82da");var Ht=a("953d"),Jt=a.n(Ht),Yt=(a("a753"),a("8096"),a("14e1"),a("bc3a")),Gt=a.n(Yt);Gt.a.defaults.baseURL="http://127.0.0.1:8888/api/private/v1/",Gt.a.interceptors.request.use((function(e){return e.headers.Authorization=window.sessionStorage.getItem("token"),e})),r["default"].prototype.$http=Gt.a,r["default"].component("tree-table",Ce.a),r["default"].config.productionTip=!1,r["default"].filter("dateFormat",(function(e){var t=new Date(e),a=t.getFullYear(),r=(t.getMonth()+1+"").padStart(2,"0"),n=(t.getDate()+"").padStart(2,"0"),s=(t.getHours()+"").padStart(2,"0"),i=(t.getMinutes()+"").padStart(2,"0"),o=(t.getSeconds()+"").padStart(2,"0");return"".concat(a,"-").concat(r,"-").concat(n," ").concat(s,":").concat(i,":").concat(o)})),r["default"].use(Jt.a),new r["default"]({router:$e,render:function(e){return e(c)}}).$mount("#app")},"57e6":function(e,t,a){},"6ba6":function(e,t,a){},"70f4":function(e,t,a){"use strict";a("c0b1")},"7dc0":function(e,t,a){"use strict";a("c7c8")},"82da":function(e,t,a){},afb6:function(e,t,a){},c0b1:function(e,t,a){},c7c8:function(e,t,a){},cdc4:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},dff0:function(e,t,a){"use strict";a("afb6")}});
//# sourceMappingURL=app.51b34aa8.js.map